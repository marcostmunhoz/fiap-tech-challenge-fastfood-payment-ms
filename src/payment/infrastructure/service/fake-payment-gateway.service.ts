import {
  CardRequestData,
  PaymentGatewayService,
  PaymentResponseData,
  PixPaymentResponseData,
} from '@/payment/application/service/payment-gateway.service.interface';
import { v4 } from 'uuid';

const FAKE_PIX_QRCODE_DATA_URL =
  'data:image/png;base64,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';

export class FakePaymentGatewayService implements PaymentGatewayService {
  async createPixPayment(): Promise<PixPaymentResponseData> {
    return {
      id: v4(),
      qrCode: FAKE_PIX_QRCODE_DATA_URL,
      qrCodeText: 'fake-qr-code-text',
    };
  }
  async isPixPaid(): Promise<boolean> {
    return true;
  }
  async createCreditCardPayment(
    data: CardRequestData,
  ): Promise<PaymentResponseData> {
    return this.validateCardData(data);
  }
  async createDebitCardPayment(
    data: CardRequestData,
  ): Promise<PaymentResponseData> {
    return this.validateCardData(data);
  }
  async createVoucherPayment(
    data: CardRequestData,
  ): Promise<PaymentResponseData> {
    return this.validateCardData(data);
  }

  private validateCardData(data: CardRequestData): PaymentResponseData {
    if ('1111222233334444' !== data.cardNumber) {
      throw new Error('Insufficient balance.');
    }

    return {
      id: v4(),
    };
  }
}
